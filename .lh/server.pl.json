{
    "sourceFile": "server.pl",
    "activeCommit": 0,
    "commits": [
        {
            "activePatchIndex": 16,
            "patches": [
                {
                    "date": 1752576844756,
                    "content": "Index: \n===================================================================\n--- \n+++ \n"
                },
                {
                    "date": 1752576850552,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -0,0 +1,50 @@\n+:- consult('facts.pl').\n+:- consult('task1.pl').\n+\n+:- use_module(library(http/thread_httpd)).\n+:- use_module(library(http/http_dispatch)).\n+:- use_module(library(http/http_json)).\n+:- use_module(library(http/http_cors)).\n+:- use_module(library(http/http_files)).\n+\n+% ✅ static frontend\n+:- http_handler(root(.), serve_index_file, []).\n+:- http_handler(root(static), http_reply_from_files(static, []), [prefix]).\n+\n+% ✅ API endpoints\n+:- http_handler(root(api/status), status_api, [method(get)]).\n+:- http_handler(root(api/grid), grid_api, [method(get)]).\n+:- http_handler(root(api/validate), validate_api, [method(post)]).\n+:- http_handler(root(api/status), cors_options_handler, [method(options)]).\n+:- http_handler(root(api/grid), cors_options_handler, [method(options)]).\n+:- http_handler(root(api/validate), cors_options_handler, [method(options)]).\n+\n+cors_options_handler(Request) :-\n+    cors_enable(Request, [methods([get, post, options])]),\n+    format('Status: 204~n~n').\n+\n+cors_enable_all(Request) :-\n+    cors_enable(Request, [methods([get, post, options]), headers(['Content-Type'])]).\n+\n+serve_index_file(Request) :-\n+    cors_enable(Request, [methods([get])]),\n+    http_reply_file('static/index.html', [], Request).\n+\n+status_api(Request) :-\n+    cors_enable_all(Request),\n+    reply_json(json([status=online])).\n+\n+grid_api(Request) :-\n+    cors_enable_all(Request),\n+    get_complete_grid_data(Data),\n+    reply_json(Data).\n+\n+validate_api(Request) :-\n+    cors_enable_all(Request),\n+    http_read_json_dict(Request, Dict),\n+    (   validate_grid(Dict.grid)\n+    ->  reply_json(_{valid:true, message:\"✅ حل صحيح!\"})\n+    ;   reply_json(_{valid:false, message:\"❌ حل خاطئ\"})\n+    ).\n+\n+start :- http_server(http_dispatch, [port(8080), reuse_address(true)]).\n"
                },
                {
                    "date": 1752577169053,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -0,0 +1,15 @@\n+% server.pl\n+\n+:- use_module(library(http/thread_httpd)).\n+:- use_module(library(http/http_dispatch)).\n+:- use_module(library(http/http_files)).\n+\n+:- consult('task1.pl').\n+\n+:- http_handler(root(.), serve_index, []).\n+\n+serve_index(Request) :-\n+    cors_enable_all(Request),\n+    http_reply_file('static/index.html', [], Request).\n+\n+start :- http_server(http_dispatch, [port(8080), reuse_address(true)]).\n"
                },
                {
                    "date": 1752577174658,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -0,0 +1,13 @@\n+:- use_module(library(http/thread_httpd)).\n+:- use_module(library(http/http_dispatch)).\n+:- use_module(library(http/http_files)).\n+\n+:- consult('task1.pl').\n+\n+:- http_handler(root(.), serve_index, []).\n+\n+serve_index(Request) :-\n+    cors_enable_all(Request),\n+    http_reply_file('static/index.html', [], Request).\n+\n+start :- http_server(http_dispatch, [port(8080), reuse_address(true)]).\n"
                },
                {
                    "date": 1752577634241,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -1,8 +1,8 @@\n :- use_module(library(http/thread_httpd)).\n :- use_module(library(http/http_dispatch)).\n :- use_module(library(http/http_files)).\n-\n+:- http_handler(root(static), http_reply_from_files(static, []), [prefix]).\n :- consult('task1.pl').\n \n :- http_handler(root(.), serve_index, []).\n \n"
                },
                {
                    "date": 1752578280715,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -1,8 +1,7 @@\n :- use_module(library(http/thread_httpd)).\n :- use_module(library(http/http_dispatch)).\n :- use_module(library(http/http_files)).\n-:- http_handler(root(static), http_reply_from_files(static, []), [prefix]).\n :- consult('task1.pl').\n \n :- http_handler(root(.), serve_index, []).\n \n@@ -10,123 +9,4 @@\n     cors_enable_all(Request),\n     http_reply_file('static/index.html', [], Request).\n \n start :- http_server(http_dispatch, [port(8080), reuse_address(true)]).\n-% server.pl\n-\n-:- use_module(library(http/thread_httpd)).\n-:- use_module(library(http/http_dispatch)).\n-:- use_module(library(http/http_files)).\n-\n-:- consult('task1.pl').\n-\n-:- http_handler(root(.), serve_index, []).\n-\n-serve_index(Request) :-\n-    cors_enable_all(Request),\n-    http_reply_file('static/index.html', [], Request).\n-\n-start :- http_server(http_dispatch, [port(8080), reuse_address(true)]).\n-:- consult('facts.pl').\n-:- consult('task1.pl').\n-\n-:- use_module(library(http/thread_httpd)).\n-:- use_module(library(http/http_dispatch)).\n-:- use_module(library(http/http_json)).\n-:- use_module(library(http/http_cors)).\n-:- use_module(library(http/http_files)).\n-\n-% ✅ static frontend\n-:- http_handler(root(.), serve_index_file, []).\n-:- http_handler(root(static), http_reply_from_files(static, []), [prefix]).\n-\n-% ✅ API endpoints\n-:- http_handler(root(api/status), status_api, [method(get)]).\n-:- http_handler(root(api/grid), grid_api, [method(get)]).\n-:- http_handler(root(api/validate), validate_api, [method(post)]).\n-:- http_handler(root(api/status), cors_options_handler, [method(options)]).\n-:- http_handler(root(api/grid), cors_options_handler, [method(options)]).\n-:- http_handler(root(api/validate), cors_options_handler, [method(options)]).\n-\n-cors_options_handler(Request) :-\n-    cors_enable(Request, [methods([get, post, options])]),\n-    format('Status: 204~n~n').\n-\n-cors_enable_all(Request) :-\n-    cors_enable(Request, [methods([get, post, options]), headers(['Content-Type'])]).\n-\n-serve_index_file(Request) :-\n-    cors_enable(Request, [methods([get])]),\n-    http_reply_file('static/index.html', [], Request).\n-\n-status_api(Request) :-\n-    cors_enable_all(Request),\n-    reply_json(json([status=online])).\n-\n-grid_api(Request) :-\n-    cors_enable_all(Request),\n-    get_complete_grid_data(Data),\n-    reply_json(Data).\n-\n-validate_api(Request) :-\n-    cors_enable_all(Request),\n-    http_read_json_dict(Request, Dict),\n-    (   validate_grid(Dict.grid)\n-    ->  reply_json(_{valid:true, message:\"✅ حل صحيح!\"})\n-    ;   reply_json(_{valid:false, message:\"❌ حل خاطئ\"})\n-    ).\n-\n-start :- http_server(http_dispatch, [port(8080), reuse_address(true)]).\n-:- consult('facts.pl').\n-:- consult('task1.pl').\n-\n-:- use_module(library(http/thread_httpd)).\n-:- use_module(library(http/http_dispatch)).\n-:- use_module(library(http/http_json)).\n-:- use_module(library(http/http_cors)).\n-:- use_module(library(http/http_files)).\n-\n-% ✅ static frontend\n-:- http_handler(root(.), serve_index_file, []).\n-:- http_handler(root(static), http_reply_from_files(static, []), [prefix]).\n-\n-% ✅ API endpoints\n-:- http_handler(root(api/status), status_api, [method(get)]).\n-:- http_handler(root(api/grid), grid_api, [method(get)]).\n-:- http_handler(root(api/validate), validate_api, [method(post)]).\n-:- http_handler(root(api/status), cors_options_handler, [method(options)]).\n-:- http_handler(root(api/grid), cors_options_handler, [method(options)]).\n-:- http_handler(root(api/validate), cors_options_handler, [method(options)]).\n-\n-% ✅ CORS\n-cors_options_handler(Request) :-\n-    cors_enable(Request, [methods([get, post, options])]),\n-    format('Status: 204~n~n').\n-\n-cors_enable_all(Request) :-\n-    cors_enable(Request, [methods([get, post, options]), headers(['Content-Type'])]).\n-\n-% ✅ Serving index.html\n-serve_index_file(Request) :-\n-    cors_enable(Request, [methods([get])]),\n-    http_reply_file('static/index.html', [], Request).\n-\n-% ✅ Example API Handlers\n-status_api(Request) :-\n-    cors_enable_all(Request),\n-    reply_json(json([status=online])).\n-\n-grid_api(Request) :-\n-    cors_enable_all(Request),\n-    get_complete_grid_data(Data),\n-    reply_json(Data).\n-\n-validate_api(Request) :-\n-    cors_enable_all(Request),\n-    http_read_json_dict(Request, Dict),\n-    (   validate_grid(Dict.grid)\n-    ->  reply_json(_{valid:true, message:\"✅ حل صحيح!\"})\n-    ;   reply_json(_{valid:false, message:\"❌ حل خاطئ\"})\n-    ).\n-\n-% ✅ Start server\n-start :- http_server(http_dispatch, [port(8080), reuse_address(true)]).\n"
                },
                {
                    "date": 1752578449913,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -9,4 +9,5 @@\n     cors_enable_all(Request),\n     http_reply_file('static/index.html', [], Request).\n \n start :- http_server(http_dispatch, [port(8080), reuse_address(true)]).\n+:- initialization(start).\n\\ No newline at end of file\n"
                },
                {
                    "date": 1752578875976,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -1,13 +1,19 @@\n :- use_module(library(http/thread_httpd)).\n :- use_module(library(http/http_dispatch)).\n :- use_module(library(http/http_files)).\n+\n :- consult('task1.pl').\n \n+% Serve static files from /static folder\n+:- http_handler(root(static), http_reply_from_files('static', []), [prefix]).\n+\n+% Serve index.html on root\n :- http_handler(root(.), serve_index, []).\n \n serve_index(Request) :-\n     cors_enable_all(Request),\n     http_reply_file('static/index.html', [], Request).\n \n-start :- http_server(http_dispatch, [port(8080), reuse_address(true)]).\n+start :-\n+    http_server(http_dispatch, [port(8080), reuse_address(true)]).\n :- initialization(start).\n\\ No newline at end of file\n"
                },
                {
                    "date": 1752579657544,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -0,0 +1,17 @@\n+:- use_module(library(http/thread_httpd)).\n+:- use_module(library(http/http_dispatch)).\n+:- use_module(library(http/http_files)).\n+\n+:- consult('task1.pl').\n+\n+:- http_handler(root(static), http_reply_from_files('static', []), [prefix]).\n+\n+:- http_handler(root(.), serve_index, []).\n+\n+serve_index(Request) :-\n+    cors_enable_all(Request),\n+    http_reply_file('static/index.html', [], Request).\n+\n+start :-\n+    http_server(http_dispatch, [port(8090), reuse_address(true)]).\n+:- initialization(start).\n\\ No newline at end of file\n"
                },
                {
                    "date": 1752579663205,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -0,0 +1,17 @@\n+:- use_module(library(http/thread_httpd)).\n+:- use_module(library(http/http_dispatch)).\n+:- use_module(library(http/http_files)).\n+\n+:- consult('task1.pl').\n+\n+:- http_handler(root(static), http_reply_from_files('static', []), [prefix]).\n+\n+:- http_handler(root(.), serve_index, []).\n+\n+serve_index(Request) :-\n+    cors_enable_all(Request),\n+    http_reply_file('static/index.html', [], Request).\n+\n+start :-\n+    http_server(http_dispatch, [port(8080), reuse_address(true)]).\n+:- initialization(start).\n\\ No newline at end of file\n"
                },
                {
                    "date": 1752579885308,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -0,0 +1,17 @@\n+:- use_module(library(http/thread_httpd)).\n+:- use_module(library(http/http_dispatch)).\n+:- use_module(library(http/http_files)).\n+\n+:- consult('task1.pl').\n+\n+:- http_handler(root(static), http_reply_from_files('static', []), [prefix]).\n+\n+:- http_handler(root(.), serve_index, []).\n+\n+serve_index(Request) :-\n+    cors_enable_all(Request),\n+    http_reply_file('static/index.html', [], Request).\n+\n+start :-\n+    http_server(http_dispatch, [port(8090), reuse_address(true)]).\n+:- initialization(start).\n\\ No newline at end of file\n"
                },
                {
                    "date": 1752579927715,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -12,59 +12,6 @@\n     cors_enable_all(Request),\n     http_reply_file('static/index.html', [], Request).\n \n start :-\n-    http_server(http_dispatch, [port(8090), reuse_address(true)]).\n-:- initialization(start).\n-:- use_module(library(http/thread_httpd)).\n-:- use_module(library(http/http_dispatch)).\n-:- use_module(library(http/http_files)).\n-\n-:- consult('task1.pl').\n-\n-:- http_handler(root(static), http_reply_from_files('static', []), [prefix]).\n-\n-:- http_handler(root(.), serve_index, []).\n-\n-serve_index(Request) :-\n-    cors_enable_all(Request),\n-    http_reply_file('static/index.html', [], Request).\n-\n-start :-\n     http_server(http_dispatch, [port(8080), reuse_address(true)]).\n-:- initialization(start).\n-:- use_module(library(http/thread_httpd)).\n-:- use_module(library(http/http_dispatch)).\n-:- use_module(library(http/http_files)).\n-\n-:- consult('task1.pl').\n-\n-:- http_handler(root(static), http_reply_from_files('static', []), [prefix]).\n-\n-:- http_handler(root(.), serve_index, []).\n-\n-serve_index(Request) :-\n-    cors_enable_all(Request),\n-    http_reply_file('static/index.html', [], Request).\n-\n-start :-\n-    http_server(http_dispatch, [port(8090), reuse_address(true)]).\n-:- initialization(start).\n-:- use_module(library(http/thread_httpd)).\n-:- use_module(library(http/http_dispatch)).\n-:- use_module(library(http/http_files)).\n-\n-:- consult('task1.pl').\n-\n-% Serve static files from /static folder\n-:- http_handler(root(static), http_reply_from_files('static', []), [prefix]).\n-\n-% Serve index.html on root\n-:- http_handler(root(.), serve_index, []).\n-\n-serve_index(Request) :-\n-    cors_enable_all(Request),\n-    http_reply_file('static/index.html', [], Request).\n-\n-start :-\n-    http_server(http_dispatch, [port(8080), reuse_address(true)]).\n :- initialization(start).\n\\ No newline at end of file\n"
                },
                {
                    "date": 1752580645939,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -3,15 +3,26 @@\n :- use_module(library(http/http_files)).\n \n :- consult('task1.pl').\n \n+% Static file serving\n :- http_handler(root(static), http_reply_from_files('static', []), [prefix]).\n \n+% Handle favicon.ico requests to prevent 404 errors\n+:- http_handler(root(favicon.ico), favicon_handler, []).\n+\n+% Main index handler\n :- http_handler(root(.), serve_index, []).\n \n+% Favicon handler - returns empty response to prevent 404\n+favicon_handler(Request) :-\n+    cors_enable_all(Request),\n+    format('Content-Type: image/x-icon~n~n').\n+\n serve_index(Request) :-\n     cors_enable_all(Request),\n     http_reply_file('static/index.html', [], Request).\n \n start :-\n     http_server(http_dispatch, [port(8080), reuse_address(true)]).\n+\n :- initialization(start).\n\\ No newline at end of file\n"
                },
                {
                    "date": 1752580755407,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -0,0 +1,20 @@\n+:- use_module(library(http/thread_httpd)).\n+:- use_module(library(http/http_dispatch)).\n+:- use_module(library(http/http_files)).\n+\n+:- consult('task1.pl').\n+\n+% Static file serving\n+:- http_handler(root(static), http_reply_from_files('static', []), [prefix]).\n+\n+% Main index handler\n+:- http_handler(root(.), serve_index, []).\n+\n+serve_index(Request) :-\n+    cors_enable_all(Request),\n+    http_reply_file('static/index.html', [], Request).\n+\n+start :-\n+    http_server(http_dispatch, [port(8080), reuse_address(true)]).\n+\n+:- initialization(start).\n\\ No newline at end of file\n"
                },
                {
                    "date": 1752581924930,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -0,0 +1,20 @@\n+:- use_module(library(http/thread_httpd)).\n+:- use_module(library(http/http_dispatch)).\n+:- use_module(library(http/http_files)).\n+\n+:- consult('task1.pl').\n+\n+\n+:- http_handler(root(static), http_reply_from_files('static', []), [prefix]).\n+\n+% Main index handler\n+:- http_handler(root(.), serve_index, []).\n+\n+serve_index(Request) :-\n+    cors_enable_all(Request),\n+    http_reply_file('static/index.html', [], Request).\n+\n+start :-\n+    http_server(http_dispatch, [port(8080), reuse_address(true)]).\n+\n+:- initialization(start).\n\\ No newline at end of file\n"
                },
                {
                    "date": 1752588536055,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -8,8 +8,9 @@\n :- http_handler(root(static), http_reply_from_files('static', []), [prefix]).\n \n \n :- http_handler(root(.), serve_index, []).\n+:- http_handler(root('api/reload-facts'), handle_reload_facts, []).\n \n serve_index(Request) :-\n     cors_enable_all(Request),\n     http_reply_file('static/index.html', [], Request).\n"
                },
                {
                    "date": 1752588542051,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -0,0 +1,25 @@\n+:- use_module(library(http/thread_httpd)).\n+:- use_module(library(http/http_dispatch)).\n+:- use_module(library(http/http_files)).\n+\n+:- consult('task1.pl').\n+\n+\n+:- http_handler(root(static), http_reply_from_files('static', []), [prefix]).\n+\n+\n+:- http_handler(root(.), serve_index, []).\n+:- http_handler(root('api/reload-facts'), handle_reload_facts, []).\n+\n+serve_index(Request) :-\n+    cors_enable_all(Request),\n+    http_reply_file('static/index.html', [], Request).\n+\n+start :-\n+    http_server(http_dispatch, [port(8080), reuse_address(true)]).\n+\n+:- initialization(start).handle_reload_facts(Request) :-\n+    option(method(post), Request),\n+    cors_enable_all(Request),\n+    consult('facts.pl'),\n+    reply_json_dict(_{status: \"reloaded\"}).\n\\ No newline at end of file\n"
                }
            ],
            "date": 1752576844756,
            "name": "Commit-0",
            "content": ":- consult('facts.pl').\n:- consult('task1.pl').\n\n:- use_module(library(http/thread_httpd)).\n:- use_module(library(http/http_dispatch)).\n:- use_module(library(http/http_json)).\n:- use_module(library(http/http_cors)).\n:- use_module(library(http/http_files)).\n\n% ✅ static frontend\n:- http_handler(root(.), serve_index_file, []).\n:- http_handler(root(static), http_reply_from_files(static, []), [prefix]).\n\n% ✅ API endpoints\n:- http_handler(root(api/status), status_api, [method(get)]).\n:- http_handler(root(api/grid), grid_api, [method(get)]).\n:- http_handler(root(api/validate), validate_api, [method(post)]).\n:- http_handler(root(api/status), cors_options_handler, [method(options)]).\n:- http_handler(root(api/grid), cors_options_handler, [method(options)]).\n:- http_handler(root(api/validate), cors_options_handler, [method(options)]).\n\n% ✅ CORS\ncors_options_handler(Request) :-\n    cors_enable(Request, [methods([get, post, options])]),\n    format('Status: 204~n~n').\n\ncors_enable_all(Request) :-\n    cors_enable(Request, [methods([get, post, options]), headers(['Content-Type'])]).\n\n% ✅ Serving index.html\nserve_index_file(Request) :-\n    cors_enable(Request, [methods([get])]),\n    http_reply_file('static/index.html', [], Request).\n\n% ✅ Example API Handlers\nstatus_api(Request) :-\n    cors_enable_all(Request),\n    reply_json(json([status=online])).\n\ngrid_api(Request) :-\n    cors_enable_all(Request),\n    get_complete_grid_data(Data),\n    reply_json(Data).\n\nvalidate_api(Request) :-\n    cors_enable_all(Request),\n    http_read_json_dict(Request, Dict),\n    (   validate_grid(Dict.grid)\n    ->  reply_json(_{valid:true, message:\"✅ حل صحيح!\"})\n    ;   reply_json(_{valid:false, message:\"❌ حل خاطئ\"})\n    ).\n\n% ✅ Start server\nstart :- http_server(http_dispatch, [port(8080), reuse_address(true)]).\n"
        }
    ]
}